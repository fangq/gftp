2003-1-18 Brian Masney <masneyb@gftp.org>
	* lib/misc.c lib/protocols.c lib/rfc2068.c lib/rfc959.c - if
	_LARGEFILE_SOURCE is defined, explicitly cast the file sizes to
	long long so that the %lld format will be correct

	* src/gtk/gtkui_transfer.c - gtk+ specific file transfer code.
	Forgot to attach this with the last commit

	* lib/rfc959.c (rfc959_connect) - if the username is anonymous and a
	password is already supplied, don't clobber it.

	* lib/misc.c (gftp_build_path) - when checking for already existing
	/'s, not only look at the end of the currently built string, but look
	at the beginning of the token that is about to be added
	(from Aurelien Jarno <aurel32@debian.org>)

	* lib/rfc2068.c (rfc2068_list_files) - if the current directory is /,
	just send the hostname over to the HTTP server. This was broken on some
	HTTP servers.
	(from Aurelien Jarno <aurel32@debian.org>)

	* lib/gftp.h lib/misc.c src/gtk/delete_dialog.c src/gtk/transfer.c
	src/gtk/view_dialog.c src/uicommon/gftpui.c - renamed all instances of
	copy_request() to gftp_copy_request(). Removed second argument
	(copy_local_options), the options are always copied now.

	* lib/protocols.c (gftp_parse_url) - if the URL is the local filesystem,
	skip over the whitespace at the beginning.

	* lib/rfc959.c (rfc959_syst) - allow the string MVS and OS/MVS for the
	MVS directory listings.

	* src/gtk/gtkui_transfer.c src/gtk/transfer.c src/gtk/gftpui.c - 
	started to move the transfer functionality into the uicommon directory.
	Added the text and GTK+ UI specific transfer functions.

	* src/gtk/Makefile.am po/POTFILES.in - added gtkui_transfer.c 

	* src/gtk/dnd.c src/gtk/gtkui_transfer.c src/gtk/view_dialog.c -
	s/add_file_transfer/gtkui_common_add_file_transfer/

	* src/gtk/gftp-gtk.c src/gtk/gftp-gtk.h - removed transfer_mutex

	* src/gtk/gtkui.c src/text/textui.c - added
	gftpui_add_file_to_transfer() 

	* src/uicommon/gftpui_callbacks.c src/uicommon/gftpui.c - in all of the
	thread callback functions, don't alter the return value in the function.
	Return it as is.

	* src/gtk/bookmarks.c - don't allow an item to be dropped onto the root
	node or items that are not a folder
	(from Aurelien Jarno <aurel32@debian.org>)

2003-1-7 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c (parse_time) - insert the right year for files that
	are from last year and the year is not shown in the ls output.

	* src/uicommon/gftpui.c (_gftpui_common_thread_callback)
	src/uicommon/gftpui.h - added a retries variable to the cdata structure

	* src/uicommon/gftpui.c (gftpui_common_cmd_open) src/uicommon/gftpui.c
	- actually connect to the remote server

	* src/uicommon/gftpuicallbacks.c src/uicommon/gftpui.c - in the
	callback functions, don't change the return value

	* src/text/textui.c (gftpui_generic_thread) - don't spawn a thread,
	just call the function directly

2003-1-6 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h lib/protocols.c lib/rfc959.c - added MVS directory parsing
	support. Also, in the VMS and EPLF directory formats, update the
	default file/directory perms to be -rw-r--r-- and drwx-r-xr-x
	respectively.

2003-1-5 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h lib/misc.c src/gtk/gftpui.c - added GFTP_URL_USAGE
	that is the sytax for a valid URL.

	* lib/protocols.c (gftp_set_password) - allow the password to be NULL

	* src/gtk/gtkui.c src/text/textui.c src/uicommon/gftpui.h - added
	gftpui_prompt_username() and gftpui_promot_password() to each UI

	* src/text/gftp-text.c (gftp_text_ask_question) - don't display a
	: at the end of the question here.

	* src/text/gftp-text.h - added declaration of gftp_text_ask_question()

	* src/uicommon/gftpui.c - added gftpui_common_cmd_open(). This still
	needs a little bit more work done to it.

	* src/gtk/gftp-gtk.h src/gtk/gtkui.c - when spawning a thread,
	make sure that the GUI will be updated properly as soon as the thread
	is finished.

	* src/uicommon/gftpuicallbacks.c src/uicommon/gftpui.h - added
	gftpui_common_run_ls()

	* src/uicommon/gftpui.c (gftpui_common_cmd_ls)
	src/gtk/transfer.c (ftp_list_files) - converted these functions
	over to use gftpui_common_run_ls()

	* lib/gftp.h src/gtk/misc-gtk.c src/text/gftp-text.c - added logging
	level type gftp_logging_misc_nolog. If a message is logged with this
	level, it will be displayed to the screen but, it will not be logged
	to disk.

	* src/uicommon/gftpui.c - log the directory listings with the log level
	gftp_logging_misc_nolog

	* src/gtk/gtkui.c (gftpui_generic_thread) - fixed segfault. Pass
	cdata structure instead of wdata.

2003-1-4 Brian Masney <masneyb@gftp.org>
	* src/text/Makefile.am src/gtk/Makefile.am - added @LIBINTL@ to LDADD
	line of Makefile.am

	* configure.in - added src/uicommon/Makefile to the list of files to
	be generated. 

	* configure.in lib/gftp.h - check for sys/mkdev.h header file. If it is
	found, include it. Solaris needs this for major() and minor()

	* src/uicommon/gftpui.c src/uicommon/gftpui.h
	src/uicommon/gftpuicallbacks.c - when switching between ascii/binary,
	set the option on a global basis. Converted chdir, chmod, delete,
	rename, rmdir commands over to using the new command run format so that
	it will work in the different UIs. Added site command to the command
	line.

	* lib/misc.c (gftp_parse_command_line) - unified this function so that
	it is consistent for all arguments.

	* lib/protocols.c (gftp_file_destroy) - fixed memory leak (utf8_file
	was not being freed)

	* docs/gftp-faq.sgml - updated link to the (old) threaded version of
	XFree86 libraries

2003-12-29 Brian Masney <masneyb@gftp.org>
	* po/POTFILES.in - added the new uicommon files to this file

2003-12-28 Brian Masney <masneyb@gftp.org>
	* src/gtk/gtkui.c src/text/textui.c - necessary UI related files for
	each port of gftp. The uicommon code will call these functions.

2003-12-28 Brian Masney <masneyb@gftp.org>
	**** NOTE: this commit breaks a lot of functionality in gftp. I ****
	**** still have more work to do on this. Please don't email me  ****
	**** saying that the CVS code is broken.                        ****

	* lib/bookmark.c lib/gftp.h lib/local.c lib/options.h lib/rfc2068.c
	lib/rfc959.c lib/sshv2.c - moved the use_threads option from the
	request structure over to the protocol declaration in options.h.

	* lib/options.h src/gtk/gftp-gtk.c - added cmd_in_gui option. When this
	option is enabled, a new toolbar will be shown in the GTK+ port that
	will allow you to control the GUI by entering manual commands.

	* src/Makefile.am - added uicommon directory

	* src/gtk/Makefile.am src/text/Makefile.am - link in the uicommon
	library.

	* src/uicommon/* src/text/gftp-text.c - moved most of the functionality
	of the text port over to the uicommon directory. Made this code a little
	more generic so that the GTK+ port can have a text interface
	associated with it.

	* src/gtk/gtkui.c src/gtk/gftp-gtk.c src/gtk/mkdir_dialog.c
	src/gtk/rename_dialog.c src/gtk/menu-items.c src/gtk/misc-gtk.c -
	started to clean up the callback functions and make them more tightly
	integrated with the uicommon code.

	* src/gtk/bookmarks.c src/gtk/chmod_dialog.c src/gtk/delete_dialog.c
	src/gtk/gftp-gtk.c src/gtk/menu-items.c src/gtk/misc-gtk.c
	src/gtk/transfer.c -
	s/refresh/gftpui_refresh/g
	s/jmp_environment/gftpui_common_jmp_environment/g
	s/request->use_threads/gftpui_common_use_threads (request)/g

	* src/gtk/options_dialog.c (apply_changes) - whenever the options are
	saved, check to see if the command entry needs to be shown or hidden.

2003-12-10 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c - fix IPv6 compile problem when IPv6 support is not
	available on the system.

	* lib/gftp.h src/text/gftp-text.h src/gtk/gftp-gtk.h - added
	GFTP_LOG_FUNCTION_ATTRIBUTES that is only defined when compiled
	against gcc. When this is set, it will specify the function is
	printf() type function so that extra checks can be done by the
	compiler. This is to fix problems with older Sun compilers.

	* src/gtk/gftp-gtk.c src/gtk/menu-items.c src/gtk/misc-gtk.c - check
	for a timeout from the remote server when refreshing the directory
	listing and changing directores. If it did, reconnect to the server.

	* lib/rfc2068.c - set the default file attributes to -rw-r--r-- for
	all files.

2003-12-7 Brian Masney <masneyb@gftp.org>
	* lib/options.h lib/config_file.c - removed scramble_passwords
	option. Instead, make this the default action all the time. This
	is to avoid having too many unnecessary options. Also put a note
	at the top of the bookmarks file stating the passwords are being
	scrambled.

	* lib/config_file.c lib/gftp.h lib/misc.c lib/options.h - added
	scramble passwords option. This patch is mostly from Aurelien Jarno
        <lists@aurel32.net>, but it was modified by me quite a bit. This is
	not safe, and can be broken. That is why it's labeled scrambled
	passwords instead of encrypt passwords.

	* acinclude.m4 - fix to AC_INTL_PRINTF

	* src/gtk/dnd.c (openurl_get_drag_data) - if we are connected to a
	remote site, disconnect before parsing the URL. This fixes a bug where
	the directory was not being refreshed properly (from Aurelien Jarno
	<lists@aurel32.net>)
	
	* configure.in acinclude.m4 lib/misc.c - added AC_INTL_PRINTF macro.
	If the printf family of functions supports %'ld, then HAVE_INTL_PRINTF
	will be defined. The appropriate version of insert_commas() can be
	used.

2003-12-4 Brian Masney <masneyb@gftp.org>
	* src/gftp.in - check for the bin_dir for the binary location

	* lib/cache.c lib/misc.c lib/protocols.c lib/rfc2068.c lib/rfc959.c 
	lib/sshv2.c lib/sslcommon.c src/text/gftp-text.c src/gtk/chmod_dialog.c
	src/gtk/gftp-gtk.c src/gtk/menu-items.c src/gtk/misc-gtk.c
	src/gtk/mkdir_dialog.c src/gtk/rename_dialog.c src/gtk/transfer.c -
	when calling gftp_lookup_global_option() or
	gftp_lookup_request_option(), if the value is an integer, declare
	the variable type to be intptr_t. This fixes a bug on 64bit platforms
	(from Gwenole Beauchesne <gbeauchesne@mandrakesoft.com>)

	* lib/config_file.c (gftp_config_file_read_float) - 64bit fixup

	* configure.in - increment version to 2.0.17pre0. Undefine _GNU_SOURCE.
	Check for stdint.h.

	* lib/gftp.h - include stdint.h if it is found on the system.

	* src/gtk/gftp-gtk.c (CreateToolbar) - on startup, have the host edit
	box grab the keyboard focus

2003-11-30 Brian Masney <masneyb@gftp.org>
	* lib/sshv2.c - cleaned up some of the code. Added a temporary fix for
	an upload crash that is happening on FreeBSD. 

	* src/gtk/transfer.c - shows status information in title bar. (patch
	from Jamil Geor <jamil_geor@yahoo.co.nz>, cleaned up by me some)

	* lib/options.h - added show_trans_in_title option.
	
2003-11-25 Brian Masney <masneyb@gftp.org>
	* lib/misc.c (gftp_locale_init) - call bindtextdomain() so that the
	directory is setup properly

	* lib/misc.c lib/gftp.h lib/config_file.c - move copyfile() to 
	config_file.c and declare it to be static. On the destination file,
	set the flag O_EXCL

2003-11-23 Brian Masney <masneyb@gftp.org>
	* src/gtk/transfer.c - when transfering a file, if the file being
	transfered is greater in the destination than in the source, overwrite
	it

	* lib/rfc959.c (rfc959_ipv6_data_connection_new) - when parsing the
	output, parse the integers as unsigned.

2003-11-9 Brian Masney <masneyb@gftp.org>
	* lib/options.h lib/protoocols.c - added enable_ipv6 option. 

	* lib/rfc959.c lib/protocols.c - if there is an error creating a socket,
	log a more informative error about what kind of socket was attempted
	to be created.

	* debian/* - updated Debian package files from 
	Aurelien Jarno <aurel32@debian.org>

2003-11-9 Brian Masney <masneyb@gftp.org>
	* Officially released 2.0.16

	* debian/ChangeLog - incremented version to 2.0.16

	* docs/Makefile.am - clean up documentation in clean target

	* docs/website/generate-gftp-website.pl docs/website/index.html.in -
	copy README/FAQ that is automatically generated to the website.

	* docs/website/install.html docs/website/faq.html - no longer needed
	anymore.

	* docs/website/index.html.in - updated the list of languages

	* ChangeLog-old - updated with brief list of changes since 2.0.15

2003-11-7 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h lib/local.c lib/protocols.c lib/rfc2068.c lib/rfc959.c
	lib/sshv2.c - added copy_param_options method to gftp_request
	structure. When a gftp_request structure is copied, if a
	copy_param_options method exists, this will be called so that the
	local protocol data can be copied over. This is only used by the
	FTP protocol at the moment to save the current state of Ascii or
	Binary transfers.

	* src/gtk/transfer.c (transfer_done) - when a transfer is
	completed, copy the local protocol options back to the main window

	* lib/rfc959.c (gftp_set_data_type) - check the return value of 
	rfc959_send_command() and if there is an error, return that
	error.

	* configure.in - added 'hr' to ALL_LINGUAS

2003-11-5 Brian Masney <masneyb@gftp.org>
	* TODO - updated

	* configure.in - updated version to 2.0.16.

	* configure.in docs/Makefile.am - Added check for the db2html
	command (from gtk+ configure)

	* docs/gftp-faq.sgml - updated with more information

	* docs/website/index.html.in - updated list of translations

	* lib/misc.c (expand_path) - expand paths with double slashes
	properly to support Novell directory listings.
	(gftp_build_path) - better checking of paths that end in /.
	(gftp_info) - show if _REENTRANT was defined when it was compiled.

	* README - removed, this is automatically generated now.

2003-11-3 Brian Masney <masneyb@gftp.org>
	* docs/gftp-faq.sgml docs/Makefile.am - added initial SGML version
	of the gFTP FAQ. I used the same format as the GTK+ FAQ.

	* lib/gftp.h src/gtk/transfer.c src/gtk/delete_dialog.c - removed
	transfer_direction variable from gftp_transfer structure. Cleaned
	up the code that did checks based on the value of this variable.

	* lib/rfc959.c (rfc959_syst) - added a check for Novell FTP servers

	* src/gtk/transfer.c (add_file_transfer) - check the value of the option
	one_transfer and if that is disabled, do not append the file transfers.
	(transfer_done) - refresh the destination window correctly after a
	transfer is completed.

2003-11-2 Brian Masney <masneyb@gftp.org>
	* lib/rfc2068.c (rfc2068_get_file) - if there is any data in the current
	read buffer, grab that data first. Otherwise, read from the socket.

	* lib/rfc2068.c (rfc2068_chunked_read) - more improvements to this
	function so that it will parse more chunked file transfers correctly.

	* lib/misc.c lib/gftp.h lib/rfc2068.c src/gtk/bookmarks.c 
	src/gtk/dnd.c - removed remove_double_slashes(). Call gftp_build_path()
	to build the paths. This now allows Novell directory listings with 
	//server

	* lib/protocols.c src/gtk/transfer.c lib/gftp.h - added variable
	conn_error_no_timeout to gftp_transfer structure. If this is enabled,
	if the remote connection to the server timed out, don't wait and
	immediately reconnect. So far, the only time this is used is when the
	user was editing a file and it is to be uploaded back to the server.

	* src/gtk/gftp-gtk.h src/gtk/transfer.c - add_file_transfer() now
	returns the struct gftp_transfer that was just added.

	* src/gtk/misc-gtk.c (update_directory_download_progress) - don't
	make the window a popup and remove the window decorations

	* src/text/gftp-text.c - don't populate the transfer_direction variable
	in struct gftp_transfer. This is only needed by the GTK+ port and will
	hopefully be taken out soon.

	* lib/gftp.h - remove gftp_transfer_type enum. It wasn't used anymore.
	
2003-10-27 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c (gftp_get_next_file_chunk) - fixed ASCII file corruption
	bug.

	* TODO - the top of this file now contains a list of items that needs
	to be completed before 2.0.16 can be released. If I missed something
	important, please drop me an email.

2003-10-26 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c (gftp_{get,put}_next_file_chunk) - check whether or not
	this is an ascii file transfer properly.

	* lib/rfc959.c - convert the PASS command from UTF8 using 
	gftp_convert_from_utf8()

	* src/gtk/gftp-gtk.h src/gtk/transfer.c - (create_transfer, 
	transfer_done) - added more checks whenever a transfer is created and
	stopped to make sure we don't log into the same remote host twice. This
	is mainly for DnD.

	* lib/misc.c (copy_request) - don't copy over the hostp pointer. This
	fixes a segfault in DnD

	* lib/sshv2.c - cleaned up the ssh2_params structure some

	* src/gtk/dnd.c - cleaned up the DND code some.

2003-10-25 Brian Masney <masneyb@gftp.org>
	* src/gtk/menu-items.c (dosave_directory_listing) - when saving the
	directory listing, skip over the files that are not shown based on the
	current filespec.

	* src/gtk/transfer.c src/gtk/gftp-gtk.h src/gtk/view_dialog.c - when
	editing a remote file, if the user chooses to upload the changes, make
	sure the upload is not sent to the current directory on the remote
	server.

	* lib/rfc2068.c - set the shown attributes to be -rw------- instead of
	----------. The HTTP server doesn't send the attributes over, so I just
	have to make something up.

	* src/gtk/options_dialog.c - make sure all of the tooltips text is
	passed to gettext()

	* lib/protocols.c - if the file transfer is to be throttled, only
	display the throttle message once.

	* lib/local.c (local_get_next_file) - if the file is a symlink, grab
	file size and attributes from the file this symlink points to.

2003-10-22 Brian Masney <masneyb@gftp.org>
	* lib/rfc2068.c - fixed parsing some chunked file transfers

2003-10-19 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c - abort a file transfer properly. When a transfer is
	aborted, you will not be disconnected from the remote site.

	* lib/protocols.c lib/gftp.h - added gftp_string_from_utf8(). Also, make
	gftp_string_{to,from}_utf8() be defined all the time. When using 
	glib 1.2, the functions will always return NULL.

	* lib/protocols.c - when creating a directory or renaming files, make
	sure the new name is converted from UTF8 to the local character set
	or the charset specified in the remote_charsets option.

	* src/gtk/misc-gtk.c (update_window_info) - when showing the directory
	we are currently in, make sure it is converted to UTF8

2003-10-18 Brian Masney <masneyb@gftp.org>
	* lib/misc.c lib/gftp.h src/text/gftp-text.c src/gtk/gftp-gtk.c - added
	gftp_locale_init().

	* src/gtk/Makefile.am src/text/Makefile.am - removed declaration of
	LOCALE_DIR

	* lib/Makefile.am - added declaration of LOCALE_DIR

	* lib/misc.c (insert_commas) - if _GNU_SOURCE is defined, instead of
	using my builtin function for formatting numbers, use glibc's %'ld
	(or %'lld) format to print the numbers out. This is more portable for
	other locales.

2003-10-17 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c (rfc959_ipv[46]_data_connection_new) - when there is an
	error establishing a connection to the remote server, make sure that
	GFTP_ERETRYABLE is returned.

2003-10-13 Brian Masney <masneyb@gftp.org>
	* src/gtk/options_dialog.c - when specifying a FTP proxy config in the 
	GTK+ 2.0 port, the last character was getting chopped off.

2003-10-12 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c - when logging in to the server, if a 5xx code is 
	returned, don't attempt to log in again.

	* src/gtk/bookmarks.c - disconnect from the site before we parse the
	bookmarks (from Aurelien Jarno <lists@aurel32.net>)

	* lib/sshv2.c - fixed crash when deleting subdirectories with the SSH2
	protocol.

2003-10-4 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c - fix for CRAY directory listings. Some UNIX directory
	listings with files containing spaces could be misinterpreted.

	* cvsclean - purge the m4 directory, but save the largefile.m4 file.
	(from Nathan Robertson <nathanr@nathanr.net>)

2003-10-03  Marcel Telka  <marcel@telka.sk>

	* configure.in (ALL_LINGUAS): Added sk.

2003-10-2 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c - fixed rename bug (from 
	Aurelien Jarno <aurel32@debian.org>)

	* src/gtk/gftp-gtk.c - make the help menu left aligned so that it is
	more consistent with other GNOME apps 
	(from Miguel Ibarra <mibarra@ximian.com>)

	* src/gtk/transfer.c - right after the pointer to the next transfer
	is moved, set the current transfer size back to 0. The user could
	briefly (< 1 sec) see the old size transfered on the next file.
	
2003-09-23  Taneem Ahmed  <taneem@bengalinux.org>

	* configure.in: Added "bn" to ALL_LINGUAS.

2003-9-21 Brian Masney <masneyb@gftp.org>
	* src/gtk/menu-items.c (dosave_directory_listing) - fixed a bug that 
	would occur when saving directory listings to a file, the last filename
	in the list was never written to the file 
	(from Aurelien Jarno <aurel32@debian.org>)

	* lib/protocols.c (gftp_parse_bookmark) lib/gftp.h lib/bookmark.c 
	src/gtk/bookmarks.c - added pointer to refresh_local variable that is
	enabled if the local directory was changed. In src/gtk/bookmarks.c, if
	the local directory was changed, refresh the directory listing.

	* lib/local.c src/gtk/transfer.c src/text/gftp-text.c - if there is a
	dangling symlink in the current directory, don't bail out. This was 
	causing directory listings to appear truncated.

	* configure.in - increment version to 2.0.16pre0

	* lib/rfc959.c - if there is a login failure, return GFTP_ERETRYABLE
	(from winkey <rush@winkey.oompah.org>)

2003-09-01  Metin Amiroff  <metin@karegen.com>

	configure.in: Added "az" in ALL_LINGUAS.

2003-8-21 Brian Masney <masneyb@gftp.org>
	* Officially released 2.0.15

2003-8-20 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h lib/protocols.c - largefile fixes

	* configure.in debian/changelog - updated version

	* cvsclean - clean up after ourselves a little more
	
	* ChangeLog-old README TODO docs/website/index.html.in - updated

2003-8-17 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c (parse_time) - when parsing timestamps that are not in
	the current locale, skip over the proper amount of tokens. This is so
	that the filename is returned properly.

	* lib/misc.c (gftp_info) - show the protocols that are installed.

2003-8-11 Brian Masney <masneyb@gftp.org>
	* lib/local.c (local_get_next_file) - fix for directories that are 
	symlinks

	* src/gtk/*.[ch] - updated copyright dates to 2003 on all of the files

	* src/gtk/menu-items.c lib/rfc959.c - fix for selecting ASCII/Binary 
	transfers

	* src/gtk/delete_dialog.c - don't attempt to clear the cache for the
	protocols that have the cache disabled

	* lib/local.c (local_chdir) - if request->directory == directory,
	don't free the request->directory and run getcwd(). This fixes a double
	free in the delete dialog in the GTK+ port

	* lib/gftp.h - added FIXME comment

	* lib/cache.c (gftp_delete_cache_entry) - added assertion

2003-8-7 Brian Masney <masneyb@gftp.org>
	* configure.in - HPUX fix

	* debian/changelog - incremented version

	* Officially release 2.0.15rc2

2003-8-7 Brian Masney <masneyb@gftp.org>
	* lib/cache.c lib/misc.c lib/protocols.c lib/pty.c - make sure a NUL
	byte appears at the end of the buffer after the call to strncpy

	* lib/rfc959.c - increased buffer size to directory parsing routine
	
	* lib/protocols.c (gftp_fd_write) - use a signed variable to store the
	result from write(). Write errors were not being caught properly.

2003-8-6 Brian Masney <masneyb@gftp.org>
	* lib/misc.c (gftp_build_path) - fixed initial path beginning with //.
	(expand_path) - when the path is empty at the end, set it to /. This
	would happen for directories like /etc/..

2003-8-4 Brian Masney <masneyb@gftp.org>
	* src/gtk/transfer.c (update_file_status) - fix possible division by 0

2003-8-4 Brian Masney <masneyb@gftp.org>
	* src/gtk/gftp-gtk.c (CreateMenus) - on startup, select the proper
	ASCII/binary radio button (looks like an old bug!)

	* lib/misc.c lib/gftp.h - renamed my version of g_build_path() (was
	used only in glib 1.2 only) to gftp_build_path() and it's compiled in
	all the time now

	* lib/protocols.c lib/sshv2.c src/gtk/dnd.c src/gtk/menu-items.c - 
	instead of using g_build_path(), use gftp_build_path()

2003-8-3 Brian Masney <masneyb@gftp.org>
	* lib/local.c (local_put_file) - specify an initial file creation mode
	of 0644

	* lib/misc.c lib/gftp.h - added gftp_parse_file_size(). This function
	works correctly for files greater than 2.1GB

	* lib/rfc959.c (rfc959_get_file) lib/protocols.c lib/rfc2068.c
	lib/rfc959.c - use gftp_parse_file_size()

	* lib/protocols.c lib/gftp.h (gftp_get_file, gftp_put_file, 
	gftp_transfer_file) - changed type of startsize paramter from size_t
	to off_t

2003-7-31 Brian Masney <masneyb@gftp.org>
	* lib/sshv2.c - fix blocking problem reading the error message from the
	remote server when there was an error establishing a connection

	* lib/misc.c (copy_fdata) - copy utf8_file variable in gftp_file
	structure. (fix double free that was only in development version)

	* lib/misc.c - added --info argument to the command line. This will 
	call gftp_info(), which will print out some information about how
	gftp was compiled. 

	* lib/protocols.c lib/bookmarks.c lib/gftp.h src/gtk/bookmarks.c -
	added local_request parameter to gftp_parse_bookmark(). If this is not
	NULL, and this bookmark specifies a local directory, it will change to
	it.

	* configure.in - increment version to 2.0.15rc2

2003-07-30  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Belarusian to ALL_LINGUAS.

2003-7-29 Brian Masney <masneyb@gftp.org>
	* src/gtk/options_dialog.c - fix crash that would occur when hitting 
	apply, then ok

2003-7-25 Brian Masney <masneyb@gftp.org>
	* configure.in - define HAVE_OPENPTY if openpty() is found in libutil

	* lib/gftp.h lib/pty.c - moved including of some PTY related header
	files to pty.c. Hopefully should fix build problems under FreeBSD

2003-7-25 Brian Masney <masneyb@gftp.org>
	* src/gtk/transfer.c - changed looking up of overwrite_by_default to
	overwrite_default

	* src/text/gftp-text.h - fix for when the readline library was not 
	found on the local system

2003-7-25 Brian Masney <masneyb@gftp.org>
        * lib/pty.c - prefer to use openpty() instead of grantpt() if it is
        available (for FreeBSD)

        * lib/sshv2.c - fixes for FreeBSD password prompt (from Oliver Lehmann 
        <oliver@FreeBSD.ORG>)

        * src/gtk/gftp-gtk.h src/text/gftp-text.h - added 
        __attribute__((format(printf, 3, 4))) to logging functions (from
        Oliver Lehmann <oliver@FreeBSD.ORG>)

2003-7-25 Brian Masney <masneyb@gftp.org>
	* lib/pty.c - prefer to use openpty() instead of grantpt() if it is
	available (for FreeBSD)

	* lib/sshv2.c - fixes for FreeBSD password prompt (from Oliver Lehmann 
	<oliver@FreeBSD.ORG>)

	* src/gtk/gftp-gtk.h src/text/gftp-text.h - added 
	__attribute__((format(printf, 3, 4))) to logging functions (from
	Oliver Lehmann <oliver@FreeBSD.ORG>)

2003-7-23 Brian Masney <masneyb@gftp.org>
	* TODO - updated

	* debian/* - new files from the Debian maintainer

	* docs/website/generate-gftp-website.pl - fixed generating changelog
	file

	* po/*.po - updated line numbers

2003-7-23 Brian Masney <masneyb@gftp.org>
	* configure.in - incremented version to 2.0.15rc1. Also, if readline
	wasn't found on the system, the text port wasn't be built

	* ChangeLog-old - added summary of changes since version 2.0.14

	* TODO - updated

	* src/text/gftp-text.c - build fixes if readline isn't present on the
	system

	* lib/sshv2.c - don't print out the network error as well when getting
	the error message from the remote server. The user is only interested
	in the error returned from the server.
	
2003-7-22 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c lib/gftp.h - added gftp_lookup_bookmark_option()
	and gftp_set_bookmark_option(). Also added _gftp_set_option_value()
	that is used by the set functions for bookmark and request structures

	* src/gtk/bookmarks.c - make sure the options are copied over to the
	new bookmarks. Also show all of the editable toptions for this bookmark
	entry

	* src/gtk/options_dialog.c src/gtk/gftp-gtk.h lib/config_file.c 
	lib/gftp.h - improvements to overriding options for each bookmark 
	entry. There is still one crash that is occuring that I have to track
	down. For the moment, don't edit the bookmarks twice in the same 
	session.

2003-7-20 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c lib/gftp.h - added compare_function to 
	gftp_config_vars structure. (gftp_set_global_option) use the compare
	function to see if the value was actually changed, and if so set the
	gftp_configuration_changed variable

	* lib/misc.c lib/gftp.h - For glib 1.2, added my version of 
	g_build_path() since it's not there

	* lib/misc.c - GLIB/GTK+ 1.2 fixes

	* lib/protocols.c (gftp_fd_open) - cleaned up some

	* lib/rfc959.c (rfc959_init) - if the email address is blank, get the
	users address here instead of in register_module. It was being blanked 
	out when the config file was being read

	* lib/options.h lib/rfc2068.c lib/rfc959.c lib/sshv2.c - mark the 
	config variables that can show up in the bookmarks editor

	* src/text/gftp-text.c src/gtk/options_dialog.c - use 
	gftp_set_global_option() to set the new configuration values

	* src/gtk/bookmarks.c - fixed crash in bookmarks dialog. Added notebook
	widget to the dialog as well. The options that can be edited for this 
	site will show up in other tabs

	* src/gtk/gftp-gtk.c - fixes to the calls to gftp_set_global_option()

	* src/gtk/options_dialog.c - added gftp_gtk_setup_bookmark_options()
	to display all the editable options for this bookmark

2003-7-11 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c (gftp_calc_kbs) - only call gettimeofday() at the
	end only if we are throttling this connection

	* lib/cache.c lib/options.h docs/sample.gftp/gftprc - added cache_ttl
	option to determine the amount of time that cache entries will stay 
	around

	* docs/gftp.xml docs/legal.xml docs/figures/* - documentation from
	Alexander Kirillov <kirillov@math.sunysb.edu>

	* docs/website - files for generating my main website. They aren't
	pretty, but hey it works. I'm mainly putting these in CVS just for
	backup purposes.

2003-7-10 Brian Masney <masneyb@gftp.org>
	* lib/misc.c (insert_commas) - improved calculating # of digits
	in number. (Not sure if this worked properly for long long's, aka
	off_t when _LARGEFILE_SOURCE is defined)

	* src/gtk/transfer.c (update_file_status) - changed type of remaining
	field to be off_t. (hopefully fixes >2.1GB problem)

	* lib/protocols.c (gftp_calc_kbs) - improved throttling module.

2003-7-9 Brian Masney <masneyb@gftp.org>
	* lib/sshv2.c - if we are logging in to the server, and the message 
	size is too big from the server, assume that an error message follows
	and log the ASCII text to the log window

	* src/gtk/options_dialog.c - make sure the value is set properly for
	the textcomboedt option types (the FTP proxy server type uses this)

	* lib/rfc2068.c - HTTP proxy bug fixes. Also, moved rfc2068_connect()
	call to rfc2068_send_command() and removed it from the now unneeded
	places. Also, fix in call to HEAD command

	* src/text/gftp-text.c - fixed NULL pointer deference in changing 
	directory

	* docs/sample.gftp/gftprc - enable require SSH user/pass by default

2003-7-9 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c (gftp_write_config_file) - fix for writing out
	list items to the config file. 

	* lib/config_file.c lib/gftp.h - added gftp_free_proxy_hosts() and
	gftp_copy_proxy_hosts()

	* lib/protocols.c (gftp_connect_server) - look up dont_use_proxy
	instead of ext

	* lib/protocols.c lib/sshv2.c src/gtk/dnd.c src/gtk/menu-items.c - 
	when calling g_build_path(), set the directory separator to / instead
	of G_DIR_SEPARATOR_S

	* src/gtk/gftp-gtk.c (toolbar_hostedit) - fixed crash

	* src/gtk/gftp-gtk.h - removed gotbytes from gftp_window_data
	structure

	* src/gtk/options_dialog.c - show proxy hosts in options dialog

	* docs/sample.gftp/gftprc - new default config file

2003-7-7 Brian Masney <masneyb@gftp.org>
	* configure.in src/gtk/Makefile.am src/text/Makefile.am - if the 
	OpenSSL libraries are available on the system, link them in and
	define USE_SSL. The generic SSL engine and the HTTPS protocol checks
	for this

	* lib/protocols.c (gftp_get_line) - small fix

	* lib/rfc2068.c - fixed several bugs in the handling of chunked 
	messages that are spread across multiple packets (the HTTPS protocol
	unconvered all of these)

	* lib/sslcommon.c - several fixes and cleanups

2003-7-6 Brian Masney <masneyb@gftp.org>
	* lib/configure.in - check for getdtablesize()

	* TODO - updated

2003-7-6 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c lib/sshv2.c src/gtk/dnd.c src/gtk/menu-items.c -
	instead of using g_strconcat to build the directory paths, use
	g_build_path. Fixes a bug when you was connected to a remote host,
	and you was in /, the path would show up as // 
	(from Krzysztof Foltman <kfoltman@onet.pl>, slightly changed by me)

2003-7-6 Brian Masney <masneyb@gftp.org>
	* lib/pty.c lib/gftp.h - added gftp_exec_with_new_pty() and
	gftp_exec_without_new_pty()

	* lib/sshv2.c - use the 2 new functions above

	* lib/pty.c lib/gftp.h - split open_ptys() to _gftp_ptym_open()
	and _gftp_ptys_open()

	* lib/sslcommon.c - don't do thread setup if we are compiling against
	glib 1.2. I do not want to link against the pthread library because 
	that would make the text port dependant on pthreads being installed on
	the box

2003-7-5 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c (gftp_get_line) - fixed bug where the read function
	was being called one extra time after the end of file was reached

	* lib/rfc2068.c - fixes for chunked file transfers. All known issues with the
	HTTP protocol should be (hopefully) fixed now

	* lib/httpcommon.h (struct rfc2068_params_tag) - added eof variable

2003-7-1 Brian Masney <masneyb@gftp.org>
	* lib/misc.c (base64_encode) - alphabet fix (+ wasn't a valid
	character, it should have been /) (thanks to Holger Kiehl
	<Holger.Kiehl@dwd.de> for pointing this out)

	* lib/config_file.c lib/gftp.h - added copy function for options
	variables. The functions gftp_config_file_copy_text(), 
	gftp_config_file_copy_ptr_contents() and gftp_config_file_copy_color()
	were added

	* lib/protocols.c - make sure the remote_charsets string is restored
	properly after it is used

	* src/gtk/bookmarks.c - remove memory leak comments, these are fixed
	now

	* src/gtk/transfer.c - removed start_file_transfers variable

	* src/gtk/misc-gtk.c src/gtk/gftp-gtk.h lib/misc.c lib/gftp.h - moved
	get_next_selection() to lib

	* acinclude.h (AC_TYPE_SOCKLEN_T) - AC_DEFINE fix (from
	Nathan Robertson <nathanr@nathanr.net>)

2003-6-25 Brian Masney <masneyb@gftp.org>
	* lib/misc.c (expand_path) - small improvements

	* lib/rfc2068.c src/text/gftp-gtk.c - fixes for path handling, namely
	when changing directories to the parent (..)

2003-6-25 Brian Masney <masneyb@gftp.org>
	* lib/misc.c - fix warning if DMALLOC is disabled

	* src/text/gftp-text.c - don't attempt to expand the local directory

	* TODO - updated

2003-6-25 Brian Masney <masneyb@gftp.org>
	* acinclude.m4 - added AC_TYPE_SOCKLEN_T. Thanks to
	Nathan Robertson <nathanr@nathanr.net> for pointing this out

	* configure.in - call AC_TYPE_SOCKLEN_T. Updates to AC_OUTPUT

	* lib/gftp.h - remove check for HAVE_SOCKLEN_T
	
	* Makefile.am - formatting fixes

2003-6-25 Brian Masney <masneyb@gftp.org>
	* configure.in - added mk to ALL_LINGUAS

	* lib/gftp.h - added several macros for dmalloc

	* lib/misc.c src/text/gftp-text.c src/gtk/gftp-gtk.c - added
	gftp_shutdown() to misc.c. This will write out the configuration
	file, clear the cache, and if dmalloc is enabled, free the memory
	that was allocated on startup

	* lib/config_file.c lib/gftp.h lib/misc.c lib/options.h - added
	gftp_configuration_changed parameter

	* lib/config_file.c lib/misc.c lib/protocols.c - added 
	gftp_config_free_options()

	* lib/config_file.c src/gtk/bookmarks.c - added gftp_bookmarks() which
	is derived mostly from bm_close_dialog()

	* lib/rfc959.c - added rfc959_request_destroy(). Free the getline
	buffers in this function

	* src/gtk/misc-gtk.c (gftp_item_factory_translate) - remove double 
	g_strdup() call

	* lib/config_file.c lib/gftp.h src/gtk/misc-gtk.c - moved
	get_xpm_path() to GTK+ port. No longer call it startup when reading
	the config file
	
2003-6-24 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c lib/gftp.h lib/protocols.c - added backend for 
	overriding options on a per bookmark basis. Also added 
	gftp_copy_local_options() to config_file.c

	* lib/gftp.h lib/misc.c src/gtk/bookmarks.c - added
	gftp_free_bookmark() to misc.c. It was taken from the function
	free_bookmark_entry_items() in bookmarks.c

	* lib/sslcommon.c - formatting fixes. Added thread functions (mostly 
	from the OReilly SSL book)

2003-6-22 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c lib/gftp.h - renamed parse_args to 
	gftp_config_parse_args() and removed the static declaration

	* lib/protocols.c (gftp_request_destroy) - fixed memory problem with 
	the new local configuration interface

	* src/gtk/gftp-gtk.c - added gftp_gtk_config_(read|write)_color().
	I am overriding the read and write functions for
	gftp_option_type_color to be these functions. This is so that I can
	use a GdkColor structure instead of a gftp_color structure

	* src/gtk/misc-gtk.c - when destroying the dialogs, set the pointers
	to NULL before we call the callback functions. This is to make sure
	that they aren't being used in the callbacks

	* TODO - updated

2003-6-19 Brian Masney <masneyb@gftp.org>
	* autogen.sh - updated to hopefully make it more portable across
	various systems

	* lib/rfc959.c - change variable type of data_addr_len from size_t
	to socklen_t (fixed warnings on 64 bit machines)

	* src/gtk/chmod_dialog.c src/gtk/gftp-gtk.c src/gtk/menu-items.c
	src/gtk/misc-gtk.c src/gtk/mkdir_dialog.c src/gtk/options_dialog.c
	src/gtk/rename_dialog.c src/gtk/transfer.c - rather than casting
	from integer to pointer and vice versa, use GINT_TO_POINTER and
	GPOINTER_TO_INT. These macros do the exact same thing and I'm 
	still getting compiler warnings on Debian Sparc64 with -m64, but at
	least I'll be able to fix the define in glib and then these warnings
	will be fixed then

2003-6-18 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c - send right parameters to the logging function
	(from Nam SungHyun <namsh@kldp.org>)

2003-6-17 Brian Masney <masneyb@gftp.org>
	* src/gtk/misc-gtk.c (ftp_log) - remote charset fixes for when the log 
	message is generated inside a child thread

	* lib/cache.c - don't complain about not being able to open index.db

2003-6-16 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c (gftp_string_to_utf8) - return if request is NULL

	* lib/protocols.c - run g_iconv_close() in gftp_disconnect() instead
	of gftp_end_transfer()

	* lib/gftp.h src/text/gftp-text.c src/gtk/misc-gtk.c - changed 2nd
	parameter of logging function to be a request structure, instead of
	request->user_data. In the logging functions, if the string isn't in
	UTF-8, convert it with gftp_string_to_utf8()

	* lib/bookmark.c lib/cache.c lib/gftp.h lib/https.c lib/local.c
	lib/protocols.c lib/rfc2068.c lib/rfc959.c lib/sshv2.c lib/sslcommon.c
	src/gtk/chmod_dialog.c src/gtk/delete_dialog.c src/gtk/gftp-gtk.h 
	src/gtk/menu-items.c src/gtk/misc-gtk.c src/gtk/mkdir_dialog.c 
	src/gtk/rename_dialog.c src/gtk/transfer.c src/text/gftp-text.c 
	src/gtk/gftp-gtk.h src/text/gftp-text.h - pass request structure
	to logging function instead of request->user_data

	* lib/protocols.c (_gftp_get_next_charset) - set the separator for
	remote charsets to be a comma

	* lib/options.h - updated description of remote charsets

	* lib/gftp.h lib/misc.c lib/options.h lib/protocols.c
	src/gtk/misc-gtk.c - added remote_charsets option. Whenever a file is
	read in that is not in UTF-8, it will first attempt to convert it from
	the local charset, and if that fails, it will try each of the locales
	in this list. I have no idea if this even works, so if someone can test
	this, please let me know.

2003-6-15 Brian Masney <masneyb@gftp.org>
	* lib/cache.c lib/gftp.h - added gftp_generate_cache_description(). 

	* lib/cache.c lib/gftp.h src/text/gftp-text.c src/gtk/delete-dialog.c 
	src/gtk/menu-items.c src/gtk/misc-gtk.c src/gtk/mkdir-dialog.c - Added
	description parameter to gftp_delete_cache_entry().

	* lib/protocols.c lib/gftp.h - added gftp_fd_open(). It will call 
	open() and then set the socket option close on exec

	* lib/cache.c lib/local.c lib/misc.c - use gftp_fd_open() instead of
	open()

	* lib/rfc959.c lib/protocols.c - on newly created sockets, make sure
	the close on exec socket option is set

	* lib/options.h src/text/gftp-text.c src/gtk/transfer.c - added
	preserve_permissions option

	* lib/protocols.c (gftp_parse_url) - allow an @ to be in the username

	* src/text/gftp-text.c - after transfering a file, honor 
	preserve_permissions if it is set

	* src/gtk/delete-dialog.c - improvments to clearing the expired cache
	entries

2003-6-14 Brian Masney <masneyb@gftp.org>
	* lib/cache.c (gftp_delete_cache_entry) - fix for restoring newlines

	* lib/gftp.h lib/protocols.c - added EOF flag for gftp_get_line()

	* lib/gftp.h lib/pty.c - added get_pty_impl() function for each PTY
	type

	* src/text/gftp-text.c - after removing files, clear the cache for
	that directory

2003-6-11 Brian Masney <masneyb@gftp.org>
	* lib/configure.in lib/gftp.h - portability fix for openpty(). (from 
	Nathan Robertson <nathanr@nathanr.net>, which he took from 
	http://mail.python.org/pipermail/patches/2000-June/000953.html)

	* lib/pty.h - found out about #elif preprocessor macro ;)

2003-6-9 Brian Masney <masneyb@gftp.org>
	* lib/bookmark.c lib/gftp.h lib/local.c lib/protocols.c lib/rfc2068.c
	lib/rfc959.c lib/sshv2.c - make return value of *_set_config_options()
	be an integer

	* lib/rfc2068.c lib/rfc959.c - return the error code of
	gftp_connect_server() if there was a connection problem

2003-6-8 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c lib/rfc2068.c - if gftp_connect_server() returns an
	error, make sure the exact error code is returned

2003-6-8 Brian Masney <masneyb@gftp.org>
	* lib/sslcommon.c - added entropy_len option. Added
	gftp_ssl_get_index(). Use SSL_get_ex_data() so that we can get the
	request structure, and error messages can be logged properly. Changed
	the verify depth from 4 to 9

2003-6-8 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h lib/sslcommon.c - added ssl_register_module(). This
	function registers the configuration variables for the SSL engine.
	Right now, the only variable is the entropy source

	* lib/https.c (https_register_module) - call ssl_register_module().
	Multiple protocols will be able to call this function, it will only 
	be initialized once

2003-6-8 Brian Masney <masneyb@gftp.org>
	* lib/bookmark.c lib/gftp.h lib/https.c lib/local.c lib/misc.c 
	lib/protocols.c lib/rfc2068.c lib/rfc959.c lib/sshv2.c
	src/text/gftp-text.c src/gtk/gftp-gtk.c - made the init function for 
	all the protocols return an integer instead of nothing. If there was an
	error setting up the protocol, GFTP_EFATAL should be returned and the
	connection should be aborted. The HTTPS protocol uses this to return if
	SSL support was not compiled in

	* lib/protocols.c src/text/gftp-text.c src/gtk/dnd.c
	src/gtk/gftp-gtk.c src/gtk/menu-items.c - have gftp_parse_url() log the
	error messages to the user. This shouldn't have been done in the
	individual ports

	* lib/https.c - only initialize the SSL engine the first time a SSL
	connection is made.

2003-6-8 Brian Masney <masneyb@gftp.org>
	* aclocal.m4 - removed, this file is automatically generated

	* autogen.sh - just call automake and aclocal, instead of automake-1.4
	and aclocal-1.4 (from Nathan Robertson <nathanr@nathanr.net>)

2003-6-8 Brian Masney <masneyb@gftp.org>
	* lib/https.c lib/options.h lib/sslcommon.c - make sure USE_SSL is
	defined before using any SSL functions

	* lib/gftp.h lib/protocols.c lib/rfc2068.c lib/sshv2.c lib/sslcommon.c
	lib/rfc959.c - make sure we use request->datafd for the connection. Removed
	sockfd from gftp_request structure

	* lib/rfc959.c - add data_connection to rfc959_parms structure. Use
	this for the FTP data connection

	* src/text/gftp-text.c - fixes for username/password prompt

	* src/gtk/misc-gtk.c src/gtk/transfer.c - s/sockfd/datafd/g

	* configure.in - added lib/Makefile (forgot to commit last time)

	* Makefile.am - added intl to SUBDIRS

2003-6-8 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h - if USE_SSL is defined, include the OpenSSL headers.
	Added read_function, write_function and post_connect function pointers
	to gftp_request structure. Added SSL object to gftp_request structure
	if USE_SSL is defined. Added protocol number and init function
	declarations for the HTTPS protocol

	* lib/options.h - added HTTPS to the list of supported protocols

	* lib/protocols.c lib/cache.c lib/rfc2068.c lib/rfc959.c lib/sshv2.c -
	renamed gftp_read(), gftp_write() and gftp_set_sockblocking() to 
	gftp_fd_read(), gftp_fd_write() and gftp_fd_set_sockblocking()
	respectively

	* lib/bookmark.c lib/local.c 

	* lib/misc.c lib/rfc2068.c - moved base64_encode() to misc.c

	* lib/protocols.c - improved parsing of URLs. Rather than calling
	gftp_read() or gftp_write() directly, call the read_function or
	write_function that is set in the request structure. Expanded tabs 
	to spaces. Cleanup for parsing of timestamps. In
	gftp_connect_server(), if a post_connect function pointer is set,
	call it after we are connected to the server. Improvements to
	gftp_get_line (). 

	* lib/httpcommon.h lib/rfc2068.c - moved rfc2068_params structure to
	httpcommon.h. Fix for chunked file transfers, they were not handled 
	at all before. Made the I/O calls a little more generic so that we can
	read from either a socket or a SSL connection.

	* lib/sslcommon.c - added generic SSL layer

	* lib/https.c - added support for the HTTPS protocol. It piggy backs
	off of the existing HTTP support and uses the generic SSL layer

	* src/gtk/bookmarks.c src/gtk/chmod_dialog.c src/gtk/gftp-gtk.c
	src/gtk/menu-items.c src/gtk/misc-gtk.c src/gtk/options_dialog.c 
	src/gtk/view_dialog.c - set the window icon name to the gFTP <version>

	* configure.in - added lib back to SUBDIRS (oops)

	* lib/Makefile.am - added https.c, sslcommon.c and httpcommon.h

2003-5-27 Brian Masney <masneyb@gftp.org>
	* Makefile.am configure.in autogen.sh - build fixes

	* src/text/gftp-text.c - if the protocol we are connecting to
	  doesn't need a username/password, don't prompt the user for one

2003-5-22 Brian Masney <masneyb@gftp.org>
	* lib/misc.c (gftp_usage) - updated usage statement

	* lib/options.h - put terminate options properly

2003-05-06  Christian Rose  <menthos@menthos.com>

	* configure.in: Added sr and sr@Latn to ALL_LINGUAS.

2003-05-01  Hasbullah Bin Pit  <sebol@ikhlas.com>
                                                                                
        * configure.in(ALL_LINGUAS): Added "ms".

2003-4-27 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c (gftp_config_file_read_float) - use strtod instead
	of strtof(). ANSI C describes strtod, and C99 describes strtof(). Some
	older systems don't have strtof() 

	* lib/gftp.h - if HAVE_OPENPTY is defined, include pty.h. Fix for
	GFTP_GET_AI_FAMILY when request or request->hostp is NULL. Added
	free_hostp boolean to struct gftp_request

	* lib/misc.c src/gtk/delete_dialog.c src/gtk/transfer.c - added 
	copy_local_options parameter. Add a pointer to newreq->hostp from the 
	source request structure

	* lib/protocols.c - honor free_hostp 

	* lib/rfc959.c - fix for IPV4/IPV6 detection

	* src/gtk/misc-gtk.c src/gtk/options_dialog.c - fixed compiler errors
	when compiling against GTK+ 1.2

	* src/gtk/transfer.c - lookup option one_transfer instead of 
	do_one_transfer_at_a_time

2003-04-27  Christian Rose  <menthos@menthos.com>

	* lib/rfc959.c: Fix bug #111090 by adding
	/* xgettext:no-c-format */ comment. This trivial bug prevented any
	full localization of gftp.

2003-4-25 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c - added IPV6 support (RFC2428). The only part of the
	project that isn't IPV6 ready is the proxy comparsion functions.

	* lib/protocols.c - change the hints.ai_family paramater from AF_INET
	to PF_UNSPEC

	* lib/gftp.h lib/misc.c lib/pty.c - moved the functionality of
	pty[ms]_open() to pty.c. Combined these 2 functions into open_ptys(),
	and there is one defined for each system type (lots of #define's in
	this file!)

	* lib/Makefile.am po/POTFILES.in - added pty.c 

	* lib/sshv2.c - when searching for the password prompt, omit the first
	character in case it is capitalized. Also, use the new function 
	open_ptys()

	* configure.in - search for openpty in -lutil. Also, define
	HAVE_OPENPTY if this function is present on the system


2003-4-23 Brian Masney <masneyb@gftp.org>
	* Makefile.am - removed config.rpath from EXTRA_DIST

	* configure.in - added 'sr' to ALL_LINGUAS. Incremented
	version to 2.0.15 (will be a little while before this is released.
	Still have lots to do)

	* docs/sample.gftp/gftprc - removed old unused SSH options. These were
	used by the SSH protocol I ripped out

	* lib/config_file.c - fix for gftp_set_request_option(). Implemented 
	gftp_lookup_request_options(). Overriding of configuration options now 
	works across the board :)

	* lib/protocols.c - extra checks for freeing memory

	* src/text/gftp-text.c - renamed ssh_use_sftp_subsys to the proper
	name of sshv2_use_sftp_subsys

	* src/gtk/transfer.c - renamed append_file_transfers option
	to the proper name of append_transfers. Also, added quick fix for 
	start_file_transfers option that is still missing

	* debian/gftp-text.postinst - this will add add an alternative for the
	ftp command and point it to gftp-text

2003-4-21 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h - added ui_cancel_function to struct gftp_option_type_var

	* src/gtk/gftp-gtk.c - added custom_edit_value to struct
	gftp_textcomboedt_widget_data

	* src/gtk/options_dialog.c - fixups for gftp_option_type_textcomboedt.
	The value will always convert %n to \n when reading in and then do the 
	opposite conversion when saving the variable. Also, added tooltips to 
	the options

	* lib/rfc959.c - remove FIXME comment

2003-4-18 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c lib/gftp.h - removed gftp_option_type_subtree,
	gftp_option_type_table and gftp_option_type_newtable

	* lib/config_file.c - implemented gftp_set_request_option()

	* lib/gftp.h lib/config_file.c - changed declaration of
	ui_print_function in struct gftp_option_type. Also added
	ui_save_function field to this structure

	* lib/gftp.h added local_options_vars num_local_options_vars variables
	to gftp_request

	* lib/local.c (local_set_directory) - small improvements to this
	function

	* lib/misc.c - added gftp_copy_local_options()

	* lib/options.h - fix declaration of General tab

	* lib/protocols.c - free local options

	* lib/rfc2068.c - check to see if we're connecting to a FTP site via
	proxy

	* lib/rfc959.c lib/protocols.c - changes for CRAY directory listings

	* src/gtk/gftp-gtk.h - added struct gftp_options_dialog_data and
	struct gftp_textcomboedt_widget_data

	* src/gtk/options_dialog.c - start to use new configuration interface

	* src/gtk/transfer.c - remove FIXME note. This is already in
	lib/gftp.h

2003-4-13 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c - fixed float config type

	* lib/gftp.h lib/misc.c - added gftp_gen_ls_string()

	* src/gtk/menu-items.c (dosave_directory_listing) 
	src/text/gftp-text.c (gftp_text_ls) - use 
	gftp_gen_ls_string()

2003-4-13 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c - implemented gftp_set_global_option()

	* lib/gftp.h lib/misc.c - added gftp_tdata_new()

	* src/text/gftp-text.c src/gtk/transfer.c - use gftp_tdata_new()

	* src/gtk/bookmarks.c - In run_bookmark(), use gftp_parse_bookmark()
	function. Renamed all instances of gftp_bookmarks to
	gftp_bookmarks_var

	* src/gtk/gftp-gtk.[ch] - added global variables viewedit_processes
	and viewedit_processes_done. These used to be declared in
	lib/options.h

	* src/gtk/gftp-gtk.h (struct gftp_window_data) - removed sortcol and
	sortasds variables. Added prefix_col_str variable. This will either be
	local or remote

	* src/gtk/misc-gtk.c - removed r_gethostbyname() and r_getservbyname()

	* src/gtk/transfer.c - removed gftp_gtk_calc_kbs(), get_status() and
	parse_attribs(). These are in the lib/ directory now. Also, use
	g_static_mutex_*() functions from glib instead of pthread_mutex_*()

	* src/gtk/bookmark.c src/gtk/dnd.c src/gtk/menu-items.c
	src/gtk/transfer.c - use g_strdup() instead of g_malloc()/strcpy()

	* src/gtk/options_dialog.c - commented out large parts of this file.
	This file is busted at the moment

	* src/gtk/*.[ch] - Use new configuration interface in all source 
	files. Updated copyright dates on all source files

2003-4-9 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h lib/config_file.c - reordered config option types. Added
	gftp_option_type_textcomboedt type

	* lib/options.h lib/rfc959.c - moved gftp_proxy_type to rfc959.c

	* lib/rfc959.c - added proxy_type that is
	gftp_option_type_textcomboedt. Consolidated help text into comment.
	In parse_ftp_proxy_string(), improve parsing of proxy config

2003-4-8 Brian Masney <masneyb@gftp.org>
	* src/text/gftp-text.c lib/misc.c - moved r_gethostbyname() and 
	r_getservbyname() to lib/misc.c. Now uses GMutex functions

	* lib/config_file.c lib/gftp.h lib/options.h - added config 
	variable type textcombo. default_protocol uses this

	* lib/config_file.c (gftp_read_config_file) - when reading in the
	list of supported protocols, add the protocol names to the list
	associated with default_protocol. Also, don't try to have
	default_protocol fall back to FTP. The code that uses this will fall
	back properly

	* lib/gftp.h (struct gftp_transfer) - renamed node to user_data

	* lib/misc.c lib/gftp.h - moved parse_attribs() from
	src/gtk/transfer.c to misc.c. Renamed to gftp_parse_attribs()

	* lib/protocols.c lib/gftp.h - moved get_status() from
	src/gtk/transfer.c to protocols.c. Renamed to
	gftp_get_transfer_status(). Uses GMutex functions


2003-4-7 Brian Masney <masneyb@gftp.org>
	* src/gtk/bookmarks.c - renamed struct gftp_bookmarks to
	gftp_bookmarks_var. In run_bookmark(), use gftp_parse_bookmark()

	* src/gtk/bookmarks.c src/gtk/dnd.c src/gtk/menu-items.c
	src/gtk/transfer.c - use g_strdup() instead of g_malloc()/strcpy()

	* src/gtk/dnd.c src/gtk/menu-items.c - don't use depreciated macros 
	to access the request structure 

	* src/gtk/*.c - use new gftp_lookup_global_option() and
	gftp_lookup_request_option() functions

	* src/gtk/gftp-gtk.h src/gtk/gftp-gtk.c - moved viewedit_processes and
	viewedit_process_done variables from lib/gftp.h and lib/options.h

	* src/gtk/transfer.c - removed gftp_gtk_calc_kbs(). This is now in
	lib/protocols.c. Removed Binary/Ascii conversion. This is all done in
	lib/rfc959.c

2003-4-6 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c src/text/gftp-text.c - changed arguments of 
	gftp_read_config_file() and gftp_read_bookmarks() to take an argument
	to the path of the global config directory. The text/gtk+ port will
	just pass SHARE_DIR. The native MacOS X port that is in the works
	needs this (Nathan Robertson is currently working on this port)

	* lib/gftp.h lib/config_file.c - removed config variable type
	gftp_option_type_textarray

	* lib/gftp.h lib/config_file.c - removed copy_function from
	gftp_option_type_var. This is implemented with memcpy() instead

	* lib/rfc959.c - remember to rename all instances of firewall_* to 
	ftp_proxy_*

	* lib/sshv2.c - improved generating the argument list for the ssh
	client

	* lib/sshv2.c lib/misc.c lib/gftp.h - added len argument to
	ptym_open()

	* lib/protocols.c lib/misc.c lib/config_file.c - use g_strdup() 
	instead of g_malloc()/strcpy()

2003-4-5 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c lib/options.h lib/gftp.h lib/rfc959.c
	lib/rfc2068.c lib/ssh.c - added new internal configuration interface. 
	Rather than having a global variable for each option, I have a global 
	hash table (gftp_global_options_htable) that I can look up option names
	by name using gftp_lookup_global_option(). I also an options hash 
	associated with a request structure, so I will be able to call 
	gftp_lookup_request_option(). I will be able to override options with 
	bookmarks or while transfers are in progress very easily now. Also, all
	options no longer have to appear in config_file.c, the per protocol 
	options can appear inside their own file

	* lib/gftp.h lib/bookmarks.c lib/local.c lib/rfc959.c lib/rfc2068.c -
	remove set_data_type and protocol name from struct gftp_request

	* lib/rfc959.c - renamed all firewall_* variables to ftp_proxy_* in
	the config file

	* lib/gftp.h lib/protocols.c lib/rfc959.c - renamed all GFTP_TYPE_* 
	vars to GFTP_DIRTYPE_*

	* lib/gftp.h - removed ascii field and renamed the node pointer to 
	user_data in struct gftp_file. In gftp_request, removed any setting 
	that is now stored in the global/local hash tables. Added
	register_module() pointer that will be called whenever the protocol is
	first loaded into gftp

	* lib/rfc959.c src/text/gftp-text.c - moved the ascii/binary 
	translation to rfc959.c. Also, moved any instance of automatically 
	setting the data type to rfc959.c as well.

	* lib/misc.c lib/sshv2.c - moved all ssh functions from misc.c to
	sshv2.c. I had these origionally in misc.c because I used to have 2 
	different SSH protocols

	* lib/protocols.c src/text/gftp-text.c - added gftp_calc_kbs() to 
=	protocols.c. This no longer needs to be in the different ports

	* src/text/gftp-text.c - read/write options based on new configuration
	interface

	* Use new configuration interface in all source files

	* Updated copyright dates on all source files

	* Note: GTK+ port is completely broken at the moment. I'll upload
	those changes whenever I get them done

2003-04-05  Duarte Loreto <happyguy_pt@hotmail.com>

        * configure.in: Added "pt" to ALL_LINGUAS.

2003-03-04  Yuriy Syrota  <rasta renome.rovno.ua>

	* configure.in: Added Ukrainian (uk) to ALL_LINGUAS
	
2003-2-25 Brian Masney <masneyb@gftp.org>
	* src/gtk/gftp-gtk.c - use gtk_container_add() instead of
	gtk_scrolled_window_add_with_viewport() 
	(from Kang Jeong-Hee <Keizi@mail.co.kr>)

2003-2-23 Brian Masney <masneyb@gftp.org>
	* lib/cache.c - added function gftp_parse_cache_entry(). Save
	request->server_type (output of SYST in FTP command) to the directory
	entry

	* lib/rfc959.c (rfc959_syst) - fix to parse the output correctly

	* src/{text,gtk}/Makefile.am - remove @LIBINTL@. The gettext.m4
	macro should automatically add this to the LIBS variable

	* acinclude.m4 - put largefile.m4 in here

2003-02-21  Pablo Saratxaga  <pablo@mandrakesoft.com>
	* configure.in: Added Catalan (ca) to ALL_LINGUAS

2003-2-17 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c lib/rfc959.c - added VMS directory listing support

	* lib/config_file.c lib/protocols.c - extra checks when stripping off
	carriage returns and linefeeds

2003-2-9 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c (parse_time) - parse more time formats. Better
	error checking. If there was an error parsing this time,
	skip ahead to the next token

	* lib/rfc2068.c - this was completely broken. This was broken whenever
	I did the conversion over to use the gftp_get_line() function. 

	* lib/rfc959.c - use g_strdup instead of g_malloc/strcpy

2003-2-6 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h lib/protocols.c lib/rfc2068.c - put in new 
	parse_time() function that should work across all locales.
	It uses strptime() internally.

	* lib/misc.c - remove note from close statement

	* lib/config_file.c lib/gftp.h lib/options.h - remove ssh1_sftp_path
	option

2003-02-03  Daniel Yacob  <locales@geez.org>
	* configure.ac: Added "am" (Amharic) to ALL_LINGUAS.

2003-1-21 Brian Masney <masneyb@gftp.org>
	* configure.in - fix for Solaris. Move the initial declaration up
	in the source file

2003-1-21 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h - added server type defines. Added server_type field to 
	gftp_request

	* lib/local.c - use S_ISDIR and S_ISLINK macros

	* lib/protocols.c - (gftp_parse_ls*) - use hints from server_type for
	parsing directory listing

	* lib/rfc959.c - added function rfc959_syst. Call this on startup

	* lib/protocols.c lib/rfc959.c lib/sshv2.c - pass request structure
	to gftp_parse_ls

	* lib/sshv2.c - set server_type to be GFTP_TYPE_UNIX

2003-1-11 Brian Masney <masneyb@gftp.org>
	* autogen.sh - removed --intl and --no-changelog flags to gettextize

	* aclocal.m4 - updated

	* configure.in - and intl and po directories to AC_OUTPUT

	* cvsclean - remove more stuff

	* lib/bookmark.c (bookmark_parse_url) - use gftp_parse_bookmark
	  function

	* lib/cache.c - remove gftp_cache_get_url_prefix(). Use
	request->url_prefix instead

	* lib/config_file.c - use proper exit codes. Also complain if the 
	default protocol specified in the config file is invalid

	* lib/gftp.h lib/local.c lib/protocols.c - removed isblock, ischar,
	issocket and isfifo in struct gftp_file (not used anymore)

	* lib/gftp.h lib/misc.c - removed file_countlf (not used anymore)

	* lib/local.c lib/misc.c lib/protocols.c - various small cleanups

	* lib/misc.c (string_hash_function) - check key[i] instead of key[0]

	* lib/protocols.c lib/gftp.h - added gftp_parse_bookmark()

	* lib/rfc2068.c - if we are connected to a FTP url via a proxy, set
	request->url_prefix to be ftp. Added rfc2068_destroy() to free
	url_prefix whenever the structure is to be freed

2002-12-29 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h - don't include sys/sysmacros.h

	* src/gtk/transfer.c - more GFTP_EFATAL checks

2002-12-29 Brian Masney <masneyb@gftp.org>
	* lib/ssh.c lib/config_file.c lib/Makefile.am lib/gftp.h lib/options.h -
	removed old legacy SSH protocol and option to enable this protocol

	* lib/gftp.h - added GFTP_ERETRYABLE and GFTP_EFATAL error codes

	* lib/bookmark.c lib/local.c lib/protocols.c lib/rfc959.c lib/rfc2068.c
	lib/sshv2.c - return new error codes instead of -1 or -2

	* lib/misc.c (gftp_*_sort_function_ds) - changed return values

	* src/gtk/transfer.c (connect_thread) - if return value of 
	gftp_connect() is GFTP_EFATAL, don't attempt to retry the connection

2002-12-11 Brian Masney <masneyb@gftp.org>
	* configure.in - fix for enable/disable gtkport, textport and gtk20

2002-12-10 Brian Masney <masneyb@gftp.org>
	* configure.in - check for grantpt function

	* lib/misc.c (pty[ms]_open) - use Unix98 PTY allocation if grantpt()
	is on the current system

	* lib/gftp.h - include stropts.h if grantpt is here

2002-12-5 Brian Masney <masneyb@gftp.org>
	* Release final 2.0.14

	* lib/Chagelog-old - brief updates since 2.0.13

2002-12-4 Brian Masney <masneyb@gftp.org>
	* lib/misc.c (ssh_start_login_sequence) - if the word WARNING appears
	in the banner, don't log into the server

	* docs/sample.gftp/gftprc - removed use_default_dl_types line

2002-12-4 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c (gftp_set_data_type) - return 0 if there is no
	protocol specific set_data_type function

	* src/gtk/transfer.c (gftp_gtk_transfer_files) - ascii/binary automatic
	switching fixes

2002-12-3 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c lib/gftp.h lib/protocols.c - removed 
	use_default_dl_types option. This is always enabled by default now.

	* src/gtk/dnd.c src/gtk/transfer.c - fix for files that should be 
	transferred as ascii
	
2002-12-2 Brian Masney <masneyb@gftp.org>
	* src/gtk/bookmarks.c (run_bookmark) - don't override the value of
	need_userpass for SSH transfers

	* ChangeLog-old - clean up list of changes from 2.0.13 to 2.0.14rc1

	* README - minor fixes

	* configure.in - increment version to 2.0.14

	* debian/copyright - change my email address and webpage 

	* debian/rules - 2 small changes

	* TODO - added 1 item

2002-12-2 Brian Masney <masneyb@gftp.org>
	* src/gtk/misc-gtk.c (MakeEditDialog) - bind to enter and esc keys

2002-11-27 Brian Masney <masneyb@gftp.org>
	* Officially release 2.0.14rc1

	* lib/cache.c - take out a warning message

	* lib/misc.c lib/protocols.c lib/gftp.h lib/gtk/dnd.c lib/transfer.c -
	add second argument (free_request) to gftp_request_destroy

	* lib/protocols.c (gftp_parse_url) - make sure the request structure
	is cleared before we start to modify it

	* src/gtk/gftp-text.c - fixed crash if you didn't enter a username

2002-11-26 Brian Masney <masneyb@gftp.org>
	* configure.in - change version to 2.0.14rc1

	* lib/local.c - fix for uploading files. Move setting of hostname
	from local_connect() to local_init()

	* lib/misc.c (gftp_request) - copy only select fields over instead of
	whole structure

	* lib/protocols.c (gftp_request_new) - set datafd and cachefd to -1

	* lib/protocols.c (gftp_set_proxy_config) - allow a NULL proxy_config
	to be passed

	* src/gtk/misc-gtk.c (update_window) - don't show the hostname if we
	are connected via the local protocol

	* src/gtk/transfer.c (create_transfer) - check to see if this protocol
	is always connected

2002-11-25 Brian Masney <masneyb@gftp.org>
	* lib/misc.c (ssh_start_login_sequence) - fixes for when the initial
	SSH banner is bigger than 200 characters

	* lib/local.c (local_connect) - set request->hostname to local
	filesystem

	* lib/protocols.c (gftp_parse_url) - don't include 2 slashes for 
	the directory when parsing a local URL

	* src/gtk/chmod_dialog.c (chmod_dialog) - allow multiple files to be
	selected

	* src/gtk/dnd.c - small fixes

2002-11-23 Brian Masney <masneyb@gftp.org>
	* lib/sshv2.c - added more error checking so that the user won't get
	disconnected if they enter files or directories that don't exist
	
2002-11-23 Brian Masney <masneyb@gftp.org>
	* lib/local.c lib/rfc959.c lib/rfc2068.c lib/ssh.c lib/sshv2.c
	lib/gftp.h - added swap_socks function to gftp_request structure

	* lib/misc.c lib/protocols.c - move swap_socks() from misc.c to 
	protocols.c (renamed to gftp_swap_socks)

	* src/gtk/misc-gtk.c src/gtk/transfer.c - removed fix_display() 

	* src/gtk/delete_dialog.c src/gtk/transfer.c - changed all occurances of
	swap_socks() to gftp_swap_socks()

	* src/gtk/gftp-gtk.c src/gtk/gftp-gtk.h - removed gftp_is_started 
	variable

2002-11-21 Brian Masney <masneyb@gftp.org>
	* lib/local.c (local_put_file) - small fix

2002-11-21 Brian Masney <masneyb@gftp.org>
	* lib/misc.c lib/ssh.c lib/sshv2.c - improvements to the login
	sequence for SSH connections

	lib/sshv2.c - SSH transfers now works again
	
2002-11-21 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c (gftp_get_next_line) - fixed several bugs 

	* lib/cache.c - Don't do a cache lookup in gftp_new_cache_entry(). In 
	gftp_find_cache_entry(), don't log an error to the user if we can't
	open up the cache file

	* lib/rfc959.c lib/rfc2068.c lib/protocols.c - small cache fixes

	* lib/cache.c lib/rfc2068.c lib/rfc959.c - pass full buffer size 
	instead of buffer size - 1 to gftp_get_line

2002-11-20 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c - don't check buf[-1] for blank newlines in 
	gftp_read_config_file() and gftp_read_bookmarks_file() 

	* lib/misc.c (string_hash_function) - Fixes if the string was less 
	than 2 characters

	* src/gtk/transfer.c - unlock mutex before we destroy (for POSIX
	compliance)

	All 3 of these fixes are from Peter Osterlund <petero2@telia.com>

2002-11-20 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c lib/gftp.h - added gftp_get_line(), gftp_read(), 
	gftp_write(), gftp_writefmt(), and gftp_set_sockblocking() functions. 
	Added struct_gftp_getline_buffer for gftp_get_line function()

	* lib/cache.c lib/gftp.h lib/local.c lib/misc.c lib/protocols.c 
	lib/rfc2068.c lib/rfc959.c lib/ssh.c lib/sshv2.c - *_get_file() returns
	off_t instead of long. *_{get,put}_next_file_chunk returns ssize_t 
	instead of size_t. Added *_set_config_options function to gftp_request
	structure and protocol files. Use the new network functions
	documented above. Convert usage of ANSI C IO (FILE *) to standard BSD 
	sockets so that I can use timeouts properly with select

	* lib/misc.c (ssh_start_login_sequence) - use gftp_set_sockblock(),
	gftp_read() and gftp_write() functions

	* lib/protocols.c - move some protocol specific code to the protocol
	specific files

	* lib/local.c - log succesful messages to gftp_logging_misc instead
	of gftp_logging_error

	* lib/cache.c - log some more error conditions to the user

	* lib/rfc959.c - added rfc959_getcwd(). In, 
	rfc959_accept_active_connection(), set set socket to blocking mode
	before calling accept()

	* src/text/gftk-text.c - If we get no files in gftp_text_ls(),
	return instead of segfaulting

	* src/gtk/gftp-gtk.c - expand the port field in the toolbar to be 45
	pixels wide

	* src/text/gftp-text.c src/gtk/misc-gtk.c src/gtk/transfer.c 
	src/gtk/view_dialog.c - changes for conversion of request->{sock,data} 
	from ANSI C IO (FILE *) to standard BSD sockets

2002-11-11 Brian Masney <masneyb@gftp.org>
	* configure.in - compile GTK+ 2.0 port by default

2002-11-11 Brian Masney <masneyb@gftp.org>
	* src/gtk/dnd.c - fixes to DnD code

	* src/gtk/gftp-gtk.[ch] - added main_thread_id variable

	* src/gtk/misc-gtk.c (ftp_log) - don't check the user_data to see if 
	we're in a child thread, instead compare the value of pthread_self()
	with main_thread_id

	* src/gtk/chmod_dialog.c src/gtk/delete_dialog.c src/gtk/menu-items.c
	src/gtk/mkdir_dialog.c src/gtk/rename_dialog.c src/gtk/transfer.c -
	don't set user_data to 0x1 if we're in a child thread

	* lib/gftp.h src/gtk/misc-gtk.c src/text/gftp-text.c - make 
	r_getservbyname() available even if HAVE_GERADDRINFO is defined
	
	* lib/misc.c (make_ssh_exec_args) - if port is zero, lookup the default
	port for the ssh service

	* lib/protocols.c (gftp_connect_server) - if the port is zero, store
	the default port for that protocol there

	* src/gtk/transfer.c - added function update_window_transfer_bytes().
	Be able to update the directory download progress in window1 now

	* lib/config_file.c lib/misc.c lib/protocols.c lib/ssh.c lib/sshv2.c
	src/text/gftp-text.c - use g_strdup() instead of g_strconcat() where
	needed

2002-11-11 Andras Timar <timar@gnome.hu>
	* configure.in: added 'hu' to ALL_LINGUAS

2002-11-6 Brian Masney <masneyb@gftp.org>
	* src/gtk/gftp-gtk.c - connect to the select_row signal in the file
	listbox to grab the double click event

2002-11-5 Brian Masney <masneyb@gftp.org>
	* src/gtk/dnd.c - some code cleanups. Also, add the file transfer with
	the function add_file_transfer()

	* src/gtk/misc-gtk.c - remove several unneeded calls to fix_display()

	* src/gtk/gftp-gtk.c (list_dblclick) - add a note about the double
	click stuff not working properly

2002-11-5 Brian Masney <masneyb@gftp.org>
	* src/gtk/transfer.c - use stock icons in GTK+ 2.0 port

2002-11-5 Brian Masney <masneyb@gftp.org>
	* lib/*.c src/gtk/*.c - removed function declarations for the static 
	functions from the top of the file. I had to rearrange the order of a 
	bunch of functions to avoid compiler warnings

	* lib/gftp.h - include sys/sysmacros.h. If major() and minor() isn't
	defined, give a compiler warning and define our own

	* lib/local.c (local_get_next_file) - if this file is a device, store
	the major/minor number in the file size

	* src/gtk/misc-gtk.c (add_file_listbox) - if this file is a device, 
	use the major() and minor() macros to display the major and minor number

2002-11-5 Brian Masney <masneyb@gftp.org>
	* lib/cache.c lib/gftp.h - added second argument ignore_directory to
	gftp_delete_cache_entry

	* src/gtk/menu-items.c (disconnect) - when disconnecting from the 
	remote site, clear all cache entries for that site

	* src/gtk/delete_dialog.c src/gtk/misc-gtk.c src/gtk/mkdir_dialog.c -
	pass a 0 as second argument to gftp_delete_cache_entry

2002-10-31 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c (gftp_get_next_file) - don't use g_filename_to_utf8.
	If g_locale_to_utf8 fails, print out a warning to the user on the 
	console

2002-10-31 Brian Masney <masneyb@gftp.org>
	* src/gtk/*.[ch] - don't check for gtk+ version based on the minor 
	version. May cause problems later on.

	* lib/protocols.c src/gtk/bookmarks.c src/gtk/misc-gtk.c - use UTF8
	functions for user data when using glib 2.0

2002-10-30 Brian Masney <masneyb@gftp.org>
	* src/gtk/gftp-gtk.c (CreateMenus) - no longer use depreciated
	_gtk_accel_group_attach in GTK+ 2.0 port. Instead use 
	gtk_window_add_accel_group for both GTK+ ports 
	(from Nam SungHyun <namsh@kldp.org>)

2002-10-30 Brian Masney <masneyb@gftp.org>
	* src/gtk/transfer.c (getdir_thread) - set use_jmp_environment to 0		instead of 1

	* src/gtk/misc-gtk.c (signal_handler) - if use_jmp_environment is 0,
	and SIGINT is received, terminate the program

2002-10-29 Brian Masney <masneyb@gftp.org>
	* src/gtk/chmod_dialog.c src/gtk/delete_dialog.c src/gtk/gftp-gtk.c 
	src/gtk/gftp-gtk.h src/gtk/menu-items.c src/gtk/misc-gtk.c 
	src/gtk/mkdir_dialog.c src/gtk/rename_dialog.c src/gtk/transfer.c -
	improved and simplified signal handling code

2002-10-29 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c lib/gftp.h lib/options.h src/gtk/menu-items.c
	src/gtk/view_dialog.c - removed tmp_directory variable. Instead use 
	g_get_tmp_dir ()

	* lib/gftp.h (struct gftp_request) - added int cancel : 1 

	* lib/misc.c lib/protocols.c lib/rfc2068.c lib/rfc959.c lib/ssh.c
	lib/sshv2.c - check for interrupted signal calls

	* lib/protocols.c - added gftp_fgets() and gftp_fwrite() functions

	* src/gtk/delete_dialog.c src/gtk/misc-gtk.c src/gtk/transfer.c - use 
	g_main_context_iteration in GTK+ 2.0 port

	* src/gtk/misc-gtk.c - use g_object_unref instead of gdk_drawable_unref
	in GTK+ 2.0 port

2002-10-17 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c - add gftp_abort_transfer function. Also, in 
	gftp_transfer_file, when we do a gftp_put_file, if that fails,
	try to abort the transfer.

	* lib/rfc959.c - add rfc959_abort_transfer function

	* lib/rfc2068.c, lib/local.c - point abort_transfer pointer to 
	rfc2068_end_transfer and local_end_transfer respectively

	* lib/ssh.c, lib/sshv2.c - add FIXME to implement abort function

	* src/gtk/transfer.c - when we stop a transfer, try to abort it 
	first. If that fails, disconnect from the site completely

2002-10-15 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c - enable combo in GTK port for Proxy server type

	* lib/misc.c (gftp_sort_filelist) - make sure prev pointer to first
	entry is NULL

	* lib/protocols.c (copy_token) - when setting the end position of 
	the token to \0, after we're done set it back to the origional position

	* src/gtk/gftp-gtk.c, src/gtk/menu-items.c - changed g_list_first (list)
	to just list

2002-10-13 Brian Masney <masneyb@gftp.org>
        * lib/gftp.h (struct gftp_config_vars_tag) - remove shown flag and
        added ports_shown flag. Added GFTP_PORTS_TEXT, GFTP_PORTS_GTK,
        and GFTP_PORTS_ALL flags

        * lib/config_file.c - update to use new fields.

        * lib/config_file.c, lib/options.h, lib/gftp.h - added new global
        options: local_sortcol, local_sortasds, remote_sortcol, remote_sortasds

        * src/gtk/gftp-gtk.c - sort based on parameters above. Also, if a url
        was given on the command line, don't connect to it until the local side
        has been setup

        * src/gtk/options_dialog.c - only show variables that have GFTP_PORT_GTK
        set

        * src/text/gftp-text.c - add help screen for set command. Added command
        clear cache. Sort the filelist based on the configuration options.

        * configure.in - update to version 2.0.14

        * cvsclean - clean up the Makefile.am file better

2002-10-07 Brian Masney <masneyb@gftp.org>
	* lib/local.c - fixed file uploads

	* lib/rfc959.c - fixed crash if you uploaded/downloaded a file that
	you didn't have permission to

	* src/gtk/transfer.c - display fixes for hostname

	* autogen.sh - pass -c to automake

2002-10-07 Brian Masney <masneyb@gftp.org>
        * docs/sample.gftp/gftp-mini-logo.xpm - added mini gFTP logo file
        from Debian. This can be used as a menu icon.

2002-10-06 Brian Masney <masneyb@gftp.org>
	* src/gtk/delete_dialog.c, src/gtk/gftp-gtk.c, src/gtk/misc-gtk.c, 
	src/gtk/transfer.c - Fixed dead-locks with GDK_THREADS_{ENTER,LEAVE}

	* configure.in, src/gtk/Makefile.am - Use GTHREAD_LIBS

2002-10-03 Brian Masney <masneyb@gftp.org>
	* Makefile.am - remove intl and m4 directory from subdirs. autogen.sh
	will automagically add these for me.

	* autogen.sh - remove check for libtool

	* configure.in - link in gthread

	* cvsclean - added this script

	* *.[ch] - added $Id: ChangeLog,v 1.206 2004/01/19 22:22:51 masneyb Exp $ tags

	* debian/* - updated files from Debian maintainer

2002-10-03 Brian Masney <masneyb@gftp.org>
	* src/gtk/gftp-gtk.c - call g_thread_init (NULL)

	* src/gtk/delete_dialog.c, src/gtk/misc-gtk.c, src/gtk/transfer.c -
	call gdk_threads_enter() and gdk_threads_leave()

2002-09-24 Brian Masney <masneyb@gftp.org>
	* configure.in - take [external] off of AM_GNU_GETTEXT

2002-09-24 Brian Masney <masneyb@gftp.org>
	* intl/ - remove this directory

2002-09-24  gettextize  <bug-gnu-gettext@gnu.org>
	* Makefile.am (SUBDIRS): Add intl,
	(ACLOCAL_AMFLAGS): New variable.
	(EXTRA_DIST): Add config.rpath mkinstalldirs.
	* configure.in (AC_OUTPUT): Add intl/Makefile,

2002-09-24 Brian Masney <masneyb@gftp.org>
	* lib/config_file.c - separated saving of bookmarks from 
	gftp_write_config_file() to gftp_write_bookmarks_file(). Bookmarks will
	no longer be rewritten to disk every time gFTP exits

	* src/gtk/bookmarks.c - call gftp_write_bookmarks_file() instead of
	gftp_write_config_file() when altering a bookmark

	* configure.in - Fixed problem with the text port being compiled 
	against glib 1.2 if we wanted it to be compiled against glib 2.0 
	instead

	* autogen.sh - add this build script

2002-09-24 Brian Masney <masneyb@gftp.org>
	* Remove intl/ directory from CVS

2002-09-18 Brian Masney <masneyb@gftp.org>
        * Updated French translation (from Damien Mascr?
        <damienmascre@free.fr>)

        * Updated Japanese translation (from Ryoichi INAGAKI
        <inagaki@ryo1.net>)

2002-09-17 Brian Masney <masneyb@gftp.org>
	* src/gtk/bookmarks.c - Fixed crash that would occur if you saved the 
	changes two times in the bookmark editor. Also, fixed several memory 
	leaks

2002-09-16 Brian Masney <masneyb@gftp.org>
	* po/de.po - Updated German translation (from Matthias Haase
        <matthias_haase@bennewitz.com>)

	* po/ru.po - Updated Russian translation (from Vitaly Lipatov 
	<LAV@VL3143.spb.edu>)

2002-09-16 Brian Masney <masneyb@gftp.org>
	* src/gtk/gftp-gtk.c, src/gtk/menu-items.c, src/gtk/misc-gtk.c - 
	Fixed compile errors when compiling against GTK+ 1.2

	* src/gtk/misc-gtk.c (MakeEditDialog, MakeYesNoDialog) - fixed to work
	with GTK+ 1.2

2002-09-15 Brian Masney <masneyb@gftp.org>
	* lib/gftp.h (struct gftp_transfer) - changed the type of numfiles and
	numdirs from unsigned long to long. This must be a signed field. This 
	is a bug I introduced a few days ago.

	* lib/local.c (local_put_file) - remove the + off of the ab mode to
	fdopen. This is also a bug I introduced a few days ago.

	* src/gtk/transfer.c (gftp_gtk_calc_kbs) - make sure that the variable
	difftime isn't a negative number when computing the KB/s

	* src/gtk/menu-items.c (save_directory_listing) - remove casts to
	GTK_OBJECT for the str variable

	* src/gtk/gftp-gtk.c - use GTK_STOCK_* icons in place of left.xpm,
	right.xpm, up.xpm, down.xpm and stop.xpm in GTK+ 2.0 port

	* src/gtk/bookmarks.c - show GTK_STOCK_* icons on the popup menu

	* src/gtk/bookmarks.c, src/gtk/chmod_dialog.c, src/gtk/menu-items.c,
        src/gtk/misc-gtk.c, src/gtk/options_dialog.c and 
	src/gtk/view_dialog.c - use gtk_dialog_new_with_buttons in GTK+ 2.0 
	port to create the dialog.  Also, associate gFTP icon with this dialog

	* src/gtk/misc-gtk.c - changed the interface of MakeEditDialog and
	MakeYesNoDialog. In the GTK+ 2.0 port, I now use stock icons in the 
	dialog buttons.

2002-09-11 Marius Andreiana <mandreiana@yahoo.com>

	* configure.in: added 'ro' to ALL_LINGUAS

2002-09-08 Brian Masney <masneyb@gftp.org>
	* lib/misc.c - added gftp_sort_filelist function

	* src/gtk/gftp-gtk.c (sortrows) - call gftp_sort_filelist now
	to do the sorting

	* config.sub, install-sh, missing, mkinstalldirs - new versions from
	automake 1.4

	* src/text/gftp-text.c, lib/protocols.c - more large file support

2002-09-04 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c - FXP fixes (from Tobias Gruetzmacher 
	<tobias@portfolio16.de>)

2002-09-03 Brian Masney <masneyb@gftp.org>
	* lib/rfc2068.c - HTTP fixes when running under Solaris. Read from 
	request->sockfd and write to request->sockfd_write (Solaris doesn't 
	like it when you read/write to the same FILE structure)

	* lib/local.c - encode major/minor numbers for a device in the file 
	size. This is probably still busted for other platforms

	* lib/rfc2068.c, lib/rfc959.c, lib/ssh.c, lib/sshv2.c - Sanity 
	checking on the fdopen() calls. Also make sure that all of them have a 
	+ in their open mode. Doesn't affect UNIX, but it does affect Windows

	* src/gtk/menu-items.c, src/gtk/gftp-gtk.c, src/gtk/misc-gtk.c - added 
	function save_directory_listing. It's in the Local and Remote menus

	* src/gtk/view_dialog.c - changed log message slightly. The new string 
	should already be in the po files translated

2002-08-30 Brian Masney <masneyb@gftp.org>
	* lib/misc.c - don't allow passing a 0 to log10

2002-08-30 Brian Masney <masneyb@gftp.org>
	* src/gtk/gftp-gtk.c - Use stockitem for menu items in gtk+ 2.0.
	Use _gtk_accel_group_attach for gtk 2.0 (removes FIXME). Only call 
	bind_textdomain_codeset if we're in gtk 2.0 
	(all from Sung-Hyun Nam <namsh@kldp.org>)

2002-08-29 Sung-Hyun Nam <namsh@kldp.org>
	* po/ko.po - language team change

2002-08-29 Sung-Hyun Nam <namsh@kldp.org>
	* po/ko.po - Updated Korean translation

2002-08-29 Yanko Kaneti <yaneti@declera.com>
	* po/bg.po - Updated Bulgarian translation

2002-08-23 Brian Masney <masneyb@gftp.org>
	* configure.in - small build fixes

2002-08-23 Brian Masney <masneyb@gftp.org>
	* lib/rfc959.c - put anonymous ftp checks in here instead of scattered
	elsewhere

	* src/gtk/gftp-gtk.c - call bind_textdomain_codeset in gtk+ port. 
	Removed anonymous FTP stuff

	* lib/local.c - open files with O_LARGEFILE if _LARGEFILE_SOURCE
	is defined

	* lib/protocols.c - removed anonymous FTP stuff

	* lib/rfc2068.c - don't check for anonymous username

	* src/gtk/misc-gtk.c - translation fixes for menus 
	(from Owen Taylor <otaylor@redhat.com>)

2002-08-23 <baddog@cvs.gnome.org>
	* configure.in - (ALL_LINGUAS): zh_CN.GB2312 -> zh_CN, zh_TW.Big5 -> 
	zh_TW

2002-08-23 Abel Cheung <maddog@linux.org.hk>
	* zh_TW.Big5.po renamed to zh_TW.po

	* zh_CN.GB2312.po renamed to zh_CN.po

	* zh_TW.Big5.gmo - Removed.

	* Makefile.in.in, gftp.pot - Remove generated file.

2002-08-23 <baddog@cvs.gnome.org>
	* po/.cvsignore - Shhhhhh

2002-08-14 <cneumair@cvs.gnome.org>
	* po/de.po - Fixed German translation (charset, header)

2002-08-05 Brian Masney <masneyb@gftp.org>
	* lib/protocols.c - When we connect to a remote server, don't change 
	the hostname to the PTR record of the hostname

	* src/gtk/transfer.c - Fixed crash if you was already transfering a 
	file, and you started another transfer, and if you hit cancel at the 
	Overwrite/Resume/Skip dialog

	* docs/sample.gftp/gftprc - put the ext= lines back in the config file

	* po/es.po - Spanish updates (from Gustavo D. Vranjes 
	<gvranjes@softhome.net>)

	* po/nl.po - Dutch updates (from Myckel Habets 
	<myckelhabets@netscape.net>)

2002-07-19 Brian Masney <masneyb@gftp.org>
	* gFTP 2.0.13 released

